<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, 
    maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/land.css" />
    <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
    crossorigin="anonymous"
    />
    <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
    <title>profile</title>
</head>
<body> 
    <div id="wrapper">
    <% if (data) {%>
        <%- include("header-login")%>
    <% }else {%>
        <%- include("header-logout")%> <% }; %>
    <main>
        <div class="container">
            <div class="section1">
                <input type="radio" name="slide" id="slide1" checked>
                <input type="radio" name="slide" id="slide2">
                <input type="radio" name="slide" id="slide3">
                <input type="radio" name="slide" id="slide4">
                <ul id="imgholder" class="imgs">
                    <li class="main-slide"><img src="https://ifh.cc/g/3zShH6.png"></li>
                    <li class="main-slide"><img src="https://ifh.cc/g/3zShH6.png"></li>
                    <li class="main-slide"><img src="https://ifh.cc/g/3zShH6.png"></li>
                    <li class="main-slide"><img src="https://ifh.cc/g/3zShH6.png"></li>
                </ul>
                <div class="bullets">
                    <label for="slide1">&nbsp;</label>
                    <label for="slide2">&nbsp;</label>
                    <label for="slide3">&nbsp;</label>
                    <label for="slide4">&nbsp;</label>
                </div>
            </div>
            <!-- <section class="section1">
                <img src="https://ifh.cc/g/3zShH6.png" alt="메인이미지">
                <div class="hashtag">
                    <a href="#">#HI!</a>
                    <a href="#">#모든 습관앱</a>
                    <a href="#">#더 나은 삶을 위한 시작</a>
                </div>
                <div class="text">
                    <button><strong>🚀</strong>루틴</button>
                    <h2>삶을 바꾸는 습관</h2>
                    <p>모든 습관 앱은 혁신적인 기술과 과학적 원리를 기반으로 만들어졌습니다. 이 앱을 사용하여 삶을 바꾸는 습관을 만들고 지속하세요</p>
                </div>
                <div class="nav-btn">
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                    <a href="#"></a>
                </div> -->
            </section>
            <nav>
                <ul class="nav-list-con">
                    <div class="nav-lists">
                        <a class="on" href="#">추천</a>
                        <a href="#">New</a>
                        <a href="#">Hot</a>
                        <a href="#">함께</a>
                        <a href="#">루틴공유</a>
                        <a href="#">미션</a>
                    </div>
                </ul>
            </nav>
            <section class="section2">
                <div class="section-menu">
                    <h4>관심 분야와 역할</h4>
                    <a href="#">모두 보기</a>
                </div>
            <div id="outer">
                <div id="inner-list" class="section2-cards">
                    <div id="inner" class="section2-card">
                        <div  class="card">
                            <div class="card-top">
                                <span class="rank">운동</span><span> / </span><span>달리기</span>
                            </div>
                            <div class="card-mid-1">
                                <h6 class="title">한강 러닝</h6>
                                <p class="description">서울 마포구</p>
                                <div class="card-mid-cover"></div>
                            </div>
                            <div class="card-bottom">
                                <div class="icon">
                                    <span class="icon1">⁘2</span>
                                    <span class="icon2">D-23</span>
                                </div>
                                <h6 class="title">러닝친구 구해요!</h6>
                                <p class="description">( 1 / 2 )</p>
                            </div>
                        </div>
                    </div>
                    <div id="inner" class="section2-card">
                        <div class="card">
                            <div class="card-top">
                                <span class="rank">공부</span><span> / </span><span>코딩</span>
                            </div>
                            <div class="card-mid-2">
                                <h6 class="title">코딩 스터디</h6>
                                <p class="description">서울 강서구</p>
                                <div class="card-mid-cover"></div>
                            </div>
                            <div class="card-bottom">
                                <div class="icon">
                                    <span class="icon1">⁘4</span>
                                    <span class="icon2">D-3</span>
                                </div>
                                <h6 class="title">함께 JS공부하실..</h6>
                                <p class="description">( 2 / 6 )</p>
                            </div>
                        </div>
                    </div>
                    <div id="inner" class="section2-card">
                        <div class="card">
                            <div class="card-top">
                                <span class="rank">루틴</span><span> / </span><span>기상</span>
                            </div>
                            <div class="card-mid-3">
                                <h6 class="title">아침기상 모임</h6>
                                <p class="description">전체</p>
                                <div class="card-mid-cover"></div>
                            </div>
                            <div class="card-bottom">
                                <div class="icon">
                                    <span class="icon1">⁘9</span>
                                    <span class="icon2">D-23</span>
                                </div>
                                <h6 class="title">너만오면 바로고</h6>
                                <p class="description">( 8 / 10 )</p>
                            </div>
                        </div>
                    </div>
                    <div id="inner" class="section2-card">
                        <div class="card">
                            <div class="card-top">
                                <span class="rank">운동</span><span> / </span><span>달리기</span>
                            </div>
                            <div class="card-mid-1">
                                <h6 class="title">한강 러닝</h6>
                                <p class="description">서울 마포구</p>
                                <div class="card-mid-cover"></div>
                            </div>
                            <div class="card-bottom">
                                <div class="icon">
                                    <span class="icon1">⁘2</span>
                                    <span class="icon2">D-23</span>
                                </div>
                                <h6 class="title">러닝친구 구해요!</h6>
                                <p class="description">( 1 / 2 )</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <div class="low_button">
                    <a href="#"><img src="https://ifh.cc/g/q9dvN2.png" alt="더보기"></a>
                </div>
            </section>
            <section class="section3">
                <div class="section-menu">
                    <h4>스타일 비슷한</h4>
                    <a href="#">모두 보기</a>
                </div>
                <div class="section3-cards">
                    <div class="section3-card">
                        <div class="card">
                            <div class="card-top"></div>
                            <div class="card-img">
                            </div>
                            <div class="card-text">
                                <h6 class="title">Ipsum rolem</h6>
                                <div class="sub-title">D-23</div>
                                <p class="description">매너점수 96</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-top"></div>
                            <div class="card-img">
                            </div>
                            <div class="card-text">
                                <h6 class="title">Ipsum rolem</h6>
                                <div class="sub-title">D-23</div>
                                <p class="description">매너점수 96</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-top"></div>
                            <div class="card-img">
                            </div>
                            <div class="card-text">
                                <h6 class="title">Ipsum rolem</h6>
                                <div class="sub-title">D-23</div>
                                <p class="description">매너점수 96</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section4">
                <div class="section-menu">
                    <h4>토론방</h4>
                    <a href="#">모두 보기</a>
                </div>
                <div class="section4-cards">
                <% data.forEach(function(item, index) { %>
                    <a href="/articledetail/<%= item.titlenum %>">
                        <div class="articles">
                            <div class="info">
                                <div class="title"><div class="sub-title">#정보글</div><div class="sub-title">#에세이</div></div>
                                <h2><%= item.title %></h2>
                                <div class="content"><p class="time"><%= item.time %></p></div>
                            </div>
                        </div>
                    </a>
                    <% }); %>
                </div>
            </section>
            <section class="section5">
                <div class="section-menu">
                    <h4>기타</h4>
                    <a href="#">모두 보기</a>
                </div>
                <% for(let i = 0; i < 4; i++) { %>
                <div class="line">
                    <div class="border-bot">
                        <a href="#">모든 습관</a>
                    </div>
                </div>
             <% } %>
            </section>
            <div class="downloadsection">
                <div class="row">
                    <h5>Hello, <strong>Routine</strong></h4>
                    <br />
                    <a href="/"><img src="https://ifh.cc/g/AYzQoY.png" alt="10823"></a>
                </div>
                <div id="download">
                    <a href="#" class="appdownload">앱 다운로드<i class="material-symbols-outlined" id="add" href="plus">download</i></a>
                </div>
            </div>
            <div class="row-nav-con">
                <div class="row-nav"></div>
            </div>
        </div>
    </main>
    <footer>
        <p>© 2024 이기는 모든 습관. All Rights Reserved.</p>
    </footer>
    <%- include("lowmenu")%>
</div>
    <script>
        const mainImage = document.getElementsByClassName("main-slide")
        let animate
        function init() {
            mainImage.style.left = '0px';
        }
        function moveLeft() {
            mainImage.style.left = '0px';
            animate = setTimeout(moveLeft, 5000)
        }
        function stop() {
            clearTimeout(animate);
            mainImage.style.left = '0px';
        }
        window.onload = init;
        
        const cardContainer = document.querySelector('.section2-card');
        cardContainer.addEventListener("click", (event)=>{
            if(event.target.tagName == this){
                const card = event.target.parentElement;
                window.location.href = "detail2.html";
            }
        });
        /*
  div사이즈 동적으로 구하기
*/
const outer = document.querySelector('#outer');
const innerList = document.querySelector('#inner-list');
const inners = document.querySelectorAll('#inner');
let currentIndex = 0; // 현재 슬라이드 화면 인덱스
let currentTransition; // 현재 슬라이드 트랜지션

inners.forEach((inner) => {
  inner.style.width = `${outer.clientWidth}px`; // inner의 width를 모두 outer의 width로 만들기
})

innerList.style.width = `${outer.clientWidth * inners.length}px`; // innerList의 width를 inner의 width * inner의 개수로 만들기

/*
  이벤트 등록하기
*/
let isSlide = false; // 슬라이드 status
let slideStartX = 0; // 처음 눌러진 슬라이드의 X값
let slideGab = 0; // 처음 눌러진 슬라이드의 X값과 현재 눌러진 슬라이드의 X값의 차이
const flipGab = 80; // 화면이 넘어가지기 위한 기준 값

// 화면을 처음 클릭할 때
const slideStart = (clientX) => {
  slideStartX = clientX;
  isSlide = true;

  // 트랜지션 상태를 저장해두고 비워두기 (트랜지션이 적용되어 있으면 반응이 느려짐)
  currentTransition = window.getComputedStyle(innerList).transition;
  innerList.style.transition = 'initial';
}

// 화면을 클릭하고 이동할 때
const slideMove = (clientX) => {
  if(isSlide) {
    slideGab = slideStartX - clientX;
    if(currentIndex >= inners.length-1 && slideGab > 0) {
      slideGab = 0;
    }

    // slideGab만큼 화면 움직이기
    innerList.style.marginLeft = `-${outer.clientWidth * currentIndex + slideGab}px`;
  }
}

// 화면 클릭이 중단될 때
const slideEnd = () => {
  // flipGab을 기준으로 화면 넘어갈지를 판단
  if(slideGab >= flipGab) {
    currentIndex++;
    currentIndex = currentIndex >= inners.length ? inners.length - 1 : currentIndex;
  } else if(slideGab <= -flipGab) {
    currentIndex--;
    currentIndex = currentIndex < 0 ? 0 : currentIndex;
  }
  innerList.style.marginLeft = `-${outer.clientWidth * currentIndex}px`;
  slideGab = 0;
  isSlide = false;

  // 트랜지션 상태 원복
  innerList.style.transition = currentTransition;
}

/*
  마우스 이벤트 등록 (웹 전용)
*/
innerList.addEventListener('mousedown', (e) => {
  slideStart(e.clientX);
})

innerList.addEventListener('mousemove', (e) => {
  slideMove(e.clientX);
})

innerList.addEventListener('mouseup', () => {
  slideEnd();
})

/*
  터치 이벤트 등록 (모바일 전용)
*/
innerList.addEventListener('touchstart', (e) => {
  slideStart(e.changedTouches[0].clientX);
})

innerList.addEventListener('touchmove', (e) => {
  slideMove(e.changedTouches[0].clientX);
})

innerList.addEventListener('touchend', () => {
  slideEnd();
})
    </script>
</body>
</html>